title = zb2rhomap7bxY5r3d31orywF5KwCjrh9Y8HVypyJHmRAZ6Ep8
label = zb2rhcoC7ABP6T3q2AhqmUY47SXCc7d8fGHYkGL9UWioaamBU
input = zb2rhmv8uS1xZPa28KbqdbzVPgLkYyiBDVQ5zhqsYkQuzJTMo
addressInput = zb2rhinY8v2iHAPsDqYHotufLSRWjV7Rg5z6ppXwwrvXbUedQ

sendApp = my =>
  w = (get (my "size") "0")
  h = (get (my "size") "1")
  {
    name: "ethereum-wallet-send"
    state: {
      from: ""
      to: ""
      amount: ""
      result: ""
    }
    pos: [0 0]
    size: [w h]
    box: {
      text:{font:"helvetica"}
      background:"rgb(250,250,250)"
    }
    value: my =>
      state = (my "state")
      size = (my "size")
      w = (get size "0")
      h = (get size "1")

      updateFrom = from => state =>
        {
          from: from
          to: (get state "to")
          amount: (get state "amount")
          result: ""
        }

      updateTo = to => state =>
        {
          from: (get state "from")
          to: to
          amount: (get state "amount")
          result: ""
        }

      updateAmount = amount => state =>
        {
          from: (get state "from")
          to: (get state "to")
          amount: amount
          result: ""
        }

      updateResult = result => state =>
        {
          from: (get state "from")
          to: (get state "to")
          amount: (get state "amount")
          result: result
        }

      titleBar = {
        pos: [60 43]
        size: [232 32]
        value: title
        set: {sep: 0.32 fst: "Send" snd: "Transaction"}
      }

      labelText = {weight: "bold" color:"rgb(102,93,93)"}

      addressBox = y => updateAddress => addressName => addressLabel =>
        {
          pos: [60 y]
          size: [(sub w 8) 66]
          box: {text: labelText}
          hear: from => do => end => (do "setState" (updateAddress from state) then => (end 0))
          name: addressName
          value: label
          set: {
            label: addressLabel
            thing: addressInput
          }
        }

      fromBox = (addressBox 95 updateFrom "from" "FROM")

      toBox = (addressBox 191 updateTo "to" "SEND TO")

      amountBox = {
        pos: [60 324]
        size: [160 66]
        hear: amount => do => end => (do "setState" (updateAmount amount state) then => (end 0))
        box: {text: labelText}
        value: label
        set: {
          label: "AMOUNT"
          type: "number"
          thing: input
        }
      }

      unitBox = {
        pos: [(add 60 (add w 8)) 280]
        size: [(sub w 8) 66]
        value: label
        set: {
          label: ""
          thing: 
            {
              box:{text:{color:"rgb(120,120,120)"}}
              value: my =>
                w = (get (my "size") "0")
                h = (get (my "size") "1")
                y = 6
                h2 = (sub h (mul y 2))
                w2 = (div w 2)
                [
                  {
                    pos:[0 y]
                    size:[w2 h2]
                    value:"Ξ ETHER"
                  }
                  {
                    pos:[w2 y]
                    size:[w2 h2]
                    box:{text:{align:"right"}}
                    value:(con (con (slc (nts (stn (get state "amount"))) 0 10) " ") "ETHER")
                  }
                ]
            }
        }
      }

      sendBox = {
        pos: [0 475]
        size: [w (sub h 475)]
        box: {background: "rgb(240,240,240)"}
        value: [
          {
            pos: [60 40]
            size: [140 54]
            box: {
              cursor: "pointer"
              background: "rgb(88,145,220)"
              radius: 2
              text:{size:22}
              borders:{bottom:{size:3 style:"solid" color:"rgb(60,151,212)"}}
              onClick: do => end =>
                tx = {
                  from: (get state "from")
                  to: (get state "to")
                  value: (get state "amount")
                }
                (do "setState" (updateResult "" state) then =>
                  (do "eth" ["sendTransaction" tx] result =>
                    (do "setState" (updateResult result state)
                      then => (end 0))))
            }
            value: {
              pos: [0 18]
              size: [140 16]
              box: {text: {color:"rgb(250,250,250)" align:"center"}}
              value: "SEND"
            }
          }
          {
            pos: [156 110]
            size: [(sub w 156) 16]
            value: (get state "result")
          }
        ]
      }

      [
        titleBar
        fromBox
        toBox
        amountBox
        unitBox
        sendBox
      ]
  }

sendApp
